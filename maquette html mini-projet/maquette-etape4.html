<!DOCTYPE html>

<html>
	
	<head>
        <link rel="stylesheet" href="style.css" />
        <title>Maquette_impression-reservations</title>
		<script type="text/javascript" src="jquery-1.8.3.min.js"></script>
    </head>
	
	<header>
		<div class="mois">Novembre</div>
		<div class="jour">L 19</div>
	</header>
	
    <body>
	
		
		<script type="text/javascript">
		
		var dataFromAPI = [
			{

    "id": 2643,
    "date": "2012-03-30T00:00:00",
    "startDate": "2012-03-30T10:15:00",
    "endDate": "2012-03-30T14:15:00",
    "fields": [
        {
            "key": "Champ1",
            "displayName": "Qui",
            "value": "Guillaume Allain"
        },
        {
            "key": "Champ2",
            "displayName": "Coordonnées",
            "value": "Guillaume Allain"
        },
        {
            "key": "Champ3",
            "displayName": "Organisateur ",
            "value": "06 65 42 51 42"
        },
        {
            "key": "Champ4",
            "displayName": "Objet",
            "value": ""
        },
        {
            "key": "Champ5",
            "displayName": "Nb de participants ",
            "value": ""
        },
        {
            "key": "Champ6",
            "displayName": "Entité",
            "value": ""
        },
        {
            "key": "Champ7",
            "displayName": "",
            "value": ""
        },
        {
            "key": "Champ8",
            "displayName": "Type",
            "value": ""
        },
        {
            "key": "Champ9",
            "displayName": "Commentaires",
            "value": ""
        }
    ],
    "status": 0,
    "idGroup": 2643,
    "visit": null,
    "creationDate": "2012-03-30T00:00:00",
    "owner": "gallain",
    "creator": "gallain",
    "lastUpdateDate": "2012-03-20T07:00:55",
    "lastUpdateLogin": null,
    "EID": "264358634190",
    "resource": {
        "id": 169,
        "displayName": "Mercure",
        "url": "api/v1/resources/169"
    }

},
{

    "id": 2644,
    "date": "2012-04-05T00:00:00",
    "startDate": "2012-04-05T08:00:00",
    "endDate": "2012-04-05T19:00:00",
    "fields": [
        {
            "key": "Champ1",
            "displayName": "Qui",
            "value": "NAGGAR Marc"
        },
        {
            "key": "Champ2",
            "displayName": "Coordonnées",
            "value": "Roux Sylvain"
        },
        {
            "key": "Champ3",
            "displayName": "Organisateur ",
            "value": "01 02 03 04 05"
        },
        {
            "key": "Champ4",
            "displayName": "Objet",
            "value": "Point marketing"
        },
        {
            "key": "Champ5",
            "displayName": "Nb de participants ",
            "value": "Cocktail"
        },
        {
            "key": "Champ6",
            "displayName": "Entité",
            "value": "3"
        },
        {
            "key": "Champ7",
            "displayName": "",
            "value": ""
        },
        {
            "key": "Champ8",
            "displayName": "Type",
            "value": ""
        },
        {
            "key": "Champ9",
            "displayName": "Commentaires",
            "value": ""
        }
    ],
    "status": 0,
    "idGroup": 2505,
    "visit": null,
    "creationDate": "2012-04-05T00:00:00",
    "owner": "mnaggar",
    "creator": "bcatteau",
    "lastUpdateDate": "2012-03-20T07:00:55",
    "lastUpdateLogin": null,
    "EID": "250039331774",
    "resource": {
        "id": 158,
        "displayName": "Orion",
        "url": "api/v1/resources/158"
    }

}];

function affiche (reservation){
	var html=[];
	var i=0;
	
	var newReservation = document.createElement('div');
	newReservation.className="reservationSalle";
	newReservation.id="reservation"+reservation.id;
	$('body').append(newReservation);
	
	html[i++]=			'<span class="res">'+reservation.resource.id+'</span> > <span class="res">'+reservation.resource.displayName+'</span></br>';
	html[i++]=			'<span class="horaire">'+reservation.date+'</span></br>';
	html[i++]=			'<span class="horaire">'+reservation.startDate+'</span> / <span class="horaire">'+reservation.endDate+'</span></br>';
	html[i++]=			'Qui : <span>'+reservation.fields[0].value+'</span></br>';
	html[i++]=			'Organisateur : <span>'+reservation.fields[1].value+'</span></br>';
	html[i++]=			'Téléphone : <span>'+reservation.fields[2].value+'</span></br>';
	if(reservation.fields[3].value){
		html[i++]=			'Objet : <span>'+reservation.fields[3].value+'</span></br>';}
	if(reservation.fields[4].value){
		html[i++]=			'Disposition : <span>'+reservation.fields[4].value+'</span></br>';}
	if(reservation.fields[5].value){
		html[i++]=			'Entité : <span>'+reservation.fields[5].value+'</span></br>';}
	if(reservation.fields[6].value){
		html[i++]=			'<span>'+reservation.fields[6].value+'</span></br>';}
	if(reservation.fields[7].value){
	html[i++]=			'Type : <span>'+reservation.fields[7].value+'</span></br>';}
	if(reservation.fields[8].value){
	html[i++]=			'Commentaire : <span>'+reservation.fields[8].value+'</span></br>';}
	if(reservation.fields[5].value){
	html[i++]=			'<span class="npart">Nb participants : <span>'+reservation.fields[5].value+'</span></span></br>';}

	$('#reservation'+reservation.id).append(html);
	
};


var j=0
while(dataFromAPI[j]){
affiche(dataFromAPI[j]);
j++;
}

		</script>
	
    </body>

</html>